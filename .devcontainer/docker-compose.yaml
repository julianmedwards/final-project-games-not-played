version: '3'

services:
    devcontainer:
      image: mcr.microsoft.com/devcontainers/base:bullseye
      volumes:
        - ../..:/workspaces:cached
      network_mode: service:db
      command: sleep infinity
    db:
        environment:
          - MYSQL_ROOT_PASSWORD
        image: mysql:${MYSQL_VERSION}
        restart: unless-stopped
        ports:
            - 3376:3306
        volumes:
            - ${LOCAL_DB_PATH}:/var/lib/mysql